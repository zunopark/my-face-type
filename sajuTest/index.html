<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>연애 사주 테스트 · 관상가 양반</title>
    <link rel="stylesheet" href="./styles.css" />
    <meta name="color-scheme" content="light dark" />
  </head>
  <body>
    <header class="container">
      <h1>연애 사주 테스트</h1>
      <p class="subtitle">
        생년월일(음/양력)과 선택 정보로 사주 4주와 연애 신호(loveFacts)를
        계산합니다.
      </p>
    </header>

    <main class="container grid">
      <!-- 입력 영역 -->
      <section class="card">
        <h2>입력</h2>
        <form id="sajuForm">
          <div class="row">
            <label>이름</label>
            <input type="text" name="name" placeholder="홍길동" />
          </div>

          <div class="row two">
            <div>
              <label>성별</label>
              <select name="gender" required>
                <option value="male">남성</option>
                <option value="female">여성</option>
              </select>
            </div>
            <div>
              <label>달력</label>
              <select name="calendar" required>
                <option value="solar">양력(solar)</option>
                <option value="lunar">음력(lunar)</option>
              </select>
            </div>
          </div>

          <div class="row two">
            <div>
              <label>생년월일</label>
              <input type="date" name="date" required />
            </div>
            <div>
              <label>출생 시간</label>
              <input
                type="time"
                name="time"
                placeholder="시각 모르면 비워두세요"
              />
              <small class="muted"
                >시간을 비우면 시주는 계산하되 결과에 'hourKnown=false'로
                표시됩니다.</small
              >
            </div>
          </div>

          <div class="row two">
            <div>
              <label>타임존</label>
              <input type="text" name="timezone" value="Asia/Seoul" required />
              <small class="muted">예: Asia/Seoul, America/New_York</small>
            </div>
            <div>
              <label>출생지(선택)</label>
              <input type="text" name="place" placeholder="서울특별시…" />
            </div>
          </div>

          <div class="actions">
            <button type="submit" id="submitBtn">분석하기</button>
            <button type="button" id="demoBtn" class="ghost">
              데모 값 채우기
            </button>
          </div>

          <div id="status" class="status"></div>
        </form>
      </section>

      <!-- 결과 영역 -->
      <section class="card">
        <h2>결과</h2>

        <div id="resultEmpty" class="empty">
          아직 결과가 없습니다. 왼쪽에서 정보를 입력하고 분석하기를 눌러주세요.
        </div>

        <div id="result" class="hidden">
          <!-- 기본 인풋 -->
          <div class="kv">
            <div><b>이름</b><span id="r-name">—</span></div>
            <div><b>성별</b><span id="r-gender">—</span></div>
            <div><b>달력</b><span id="r-calendar">—</span></div>
            <div><b>생년월일</b><span id="r-date">—</span></div>
            <div><b>시간</b><span id="r-time">—</span></div>
            <div><b>타임존</b><span id="r-timezone">—</span></div>
            <div><b>출생지</b><span id="r-place">—</span></div>
          </div>

          <!-- 일간 -->
          <div class="section">
            <h3>일간</h3>
            <div class="kv">
              <div><b>한자</b><span id="dm-char">—</span></div>
              <div><b>표기</b><span id="dm-title">—</span></div>
              <div><b>오행</b><span id="dm-element">—</span></div>
              <div><b>음양</b><span id="dm-yinyang">—</span></div>
            </div>
          </div>

          <!-- 사주 4주 -->
          <div class="section">
            <h3>사주(년·월·일·시)</h3>
            <div class="pillars" id="pillars"></div>
          </div>

          <!-- 오행 분포 -->
          <div class="section">
            <h3>오행 분포</h3>
            <div class="bars" id="five-bars"></div>
            <div class="kv">
              <div><b>신강/신약</b><span id="r-strength">—</span></div>
              <div><b>대운 방향</b><span id="r-luckdir">—</span></div>
            </div>
          </div>

          <!-- 연애 팩트 -->
          <div class="section">
            <h3>연애 팩트 (loveFacts)</h3>
            <div class="kv">
              <div><b>시주 입력</b><span id="f-hourKnown">—</span></div>
              <div><b>도화 표적 지지</b><span id="f-peach-target">—</span></div>
              <div>
                <b>도화 출현 주</b><span id="f-peach-positions">—</span>
              </div>
              <div><b>배우자 별 대상</b><span id="f-spouse-type">—</span></div>
              <div>
                <b>배우자 별 등장 주</b><span id="f-spouse-positions">—</span>
              </div>
              <div>
                <b>배우자 별 총 카운트</b><span id="f-spouse-hitcount">—</span>
              </div>
            </div>

            <details>
              <summary>배우자 별 상세(detail)</summary>
              <pre id="f-spouse-detail" class="code"></pre>
            </details>

            <details>
              <summary>API 전체 JSON 보기</summary>
              <pre id="raw-json" class="code"></pre>
            </details>
          </div>
        </div>
      </section>
    </main>

    <footer class="container">
      <p class="muted">
        ※ 이 페이지는 FastAPI의 <code>/saju/compute</code> 응답(JSON)을
        시각화하는 데모입니다. 정확한 해석은 모델 프롬프트에 위 사실 블록을 넣어
        생성하세요.
      </p>
    </footer>

    <script src="./app.js"></script>
  </body>
</html>
